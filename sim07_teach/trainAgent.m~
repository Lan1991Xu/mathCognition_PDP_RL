% written by professor Jay McClelland
function [record] = trainAgent(epoch)
%% This function trains the network n trials
% initialize parameters
global p d a;
initParamsEtc(epoch);
initPlot();

% preallocate
record.r = cell(1,epoch);
run = struct('w.nItemss',[]);
% train the model for n trials
for i = 1:p.runs
    fprintf('%d\n',i);
    run.w.nItemss = runAgent(i);
    a.smgain = a.smgain + p.smirate;
    record.r = run;
end

% save the w.nItemss
record.r = run;
record.p = p;
end